resources
| where type == "microsoft.sql/servers"
| project id, name, resourceGroup, subscriptionId
| join kind=leftouter (
    resources
    | where type == "microsoft.sql/servers/azureadonlyauthentications"
    | project serverId = tolower(tostring(properties.azureAdOnlyAuthentication)), $left.id == $right.serverId
| extend aadOnlyEnabled = case(isnotempty(azureAdOnlyAuthentication), tobool(azureAdOnlyAuthentication), false)
| where aadOnlyEnabled == false
| project 
    ServerName = name,
    ResourceGroup = resourceGroup,
    SubscriptionId = subscriptionId,
    AADOnlyEnabled = aadOnlyEnabled
